IntroduÃ§Ã£o
Em Python, os ambientes virtuais sÃ£o usados para permitir que mÃºltiplas versÃµes de mÃ³dulos e bibliotecas sejam instaladas de forma independente e sejam usadas de forma independente.

Isso Ã© Ãºtil quando vocÃª deseja ter vÃ¡rias versÃµes de um mÃ³dulo ou biblioteca instaladas, ou quando deseja ter certeza de que o cÃ³digo estÃ¡ sendo executado em um ambiente controlado e conhecido.

Lembrando que todas as dependÃªncias instaladas no ambiente virtual nÃ£o existirÃ£o globalmente, com exceÃ§Ã£o do pip e do setuptools.

Nunca instale dependÃªncias complexas em ambiente global, isso pode acarretar conflitos com seu ambiente virtual.


Configurando no Windows
Como o Windows possui vÃ¡rias opÃ§Ãµes de terminais e, dependendo de qual vocÃª use, os comandos sÃ£o diferentes, a teoria abordarÃ¡ os comandos tanto para o PowerShell quanto para o GitBash.

PowerShell
Se vocÃª utiliza PowerShell, Ã© necessÃ¡rio habilitar a criaÃ§Ã£o de um ambiente virtual. Para isso, siga os procedimentos abaixo:

Abra o seu PowerShell em modo de administrador;

Digite o comando:

sql
Copiar
Editar
Get-ExecutionPolicy
Se vocÃª ainda nÃ£o tiver configurado corretamente seu Windows para receber ambiente virtual, o retorno do comando acima serÃ¡ Restricted;

Para configurar a polÃ­tica de execuÃ§Ã£o corretamente, digite:

javascript
Copiar
Editar
Set-ExecutionPolicy AllSigned
Digite S ou Y e pressione Enter para aceitar a opÃ§Ã£o que aparecerÃ¡;

Digite novamente o comando Get-ExecutionPolicy e verifique se agora o retorno Ã© AllSigned.

Caso ainda nÃ£o seja, reinicie seu computador e tente executar o comando Get-ExecutionPolicy novamente.


GitBash
NÃ£o Ã© necessÃ¡rio fazer nenhuma configuraÃ§Ã£o para habilitar a criaÃ§Ã£o de um ambiente virtual.

Desta forma, prossiga para os prÃ³ximos tÃ³picos.

Criando um ambiente virtual
O Python vem com um mÃ³dulo nativo chamado venv, que nos fornece suporte para a criaÃ§Ã£o de ambientes virtuais.

Para fazer a criaÃ§Ã£o do nosso ambiente virtual, use o comando no diretÃ³rio raiz do projeto:

nginx
Copiar
Editar
python -m venv venv
ExplicaÃ§Ã£o do comando
python: estamos selecionando o Python que foi instalado globalmente.

-m: estamos rodando um mÃ³dulo do Python como se fosse um script.

venv: nome do mÃ³dulo que estamos rodando para fazer a criaÃ§Ã£o do ambiente virtual.

venv: nome da pasta que serÃ¡ criada e que conterÃ¡ todo o nosso ambiente virtual.

ğŸ’¡ Lembrando que, por boas prÃ¡ticas, colocamos o nome do mÃ³dulo como nome da pasta, mas vocÃª pode colocar o que desejar.

âš ï¸ Sempre temos que adicionar o diretÃ³rio de ambiente virtual criado ao nosso .gitignore.

Cada pessoa que for clonar nosso repositÃ³rio para uso deve criar seu prÃ³prio ambiente e instalar os pacotes necessÃ¡rios.

AtivaÃ§Ã£o do Ambiente Virtual
Para ativar o ambiente virtual, rode o comando abaixo no diretÃ³rio principal do seu projeto (o que possui a pasta venv criada anteriormente):

PowerShell
Copiar
Editar
.\venv\Scripts\activate
A primeira vez que esse comando for executado em seu sistema, um prompt de confirmaÃ§Ã£o aparecerÃ¡.

VocÃª deverÃ¡ selecionar a opÃ§Ã£o Executar Sempre.

GitBash
bash
Copiar
Editar
source venv/Scripts/activate
Verificando se a ativaÃ§Ã£o foi bem-sucedida
ApÃ³s rodar o comando correspondente ao seu terminal, vocÃª pode verificar se a ativaÃ§Ã£o foi bem-sucedida de duas formas:

Pela indicaÃ§Ã£o no terminal

Se tudo deu certo, do lado do seu nome de usuÃ¡rio no terminal, deve aparecer o termo (venv).

scss
Copiar
Editar
(venv) chan@Endeavor ~/teoria:
Verificando o caminho do Python

Caso nÃ£o exista a indicaÃ§Ã£o visual (venv), vocÃª pode rodar o seguinte comando:

PowerShell

sql
Copiar
Editar
Get-Command python
GitBash

bash
Copiar
Editar
which python
Esses comandos devem retornar o caminho para o Python que estÃ¡ sendo utilizado atualmente na sessÃ£o.

Se deu tudo certo, o comando deve apontar para dentro do venv do seu projeto:

diff
Copiar
Editar
CommandType  Name         Version    Source
-----------  ----         -------    ------
Application  python.exe   3.11.3    ...\teoria\venv\Scripts\python.exe
DesativaÃ§Ã£o do Ambiente Virtual
Para sair do ambiente virtual (venv), utilize o seguinte comando:

nginx
Copiar
Editar
deactivate
Repare que o (venv) sumiu do lado do nome de usuÃ¡rio no terminal:

css
Copiar
Editar
chan@Endeavor ~/teoria:
DependÃªncias da AplicaÃ§Ã£o
Com o venv ativado, para mostrar todos os pacotes instalados no ambiente atual no formato de texto, utilize o comando:

pgsql
Copiar
Editar
pip freeze
Com a saÃ­da do comando pip freeze, Ã© possÃ­vel fazer a criaÃ§Ã£o do nosso arquivo requirements.txt, que irÃ¡ conter o nome e versÃ£o de todas as dependÃªncias da nossa aplicaÃ§Ã£o:

pgsql
Copiar
Editar
pip freeze > requirements.txt
ğŸ’¡ Toda vez que instalarmos um novo pacote em nosso ambiente virtual, nÃ£o podemos esquecer de executar o comando pip freeze > requirements.txt, pois nosso arquivo de requerimentos nÃ£o se atualiza sozinho.

Instalando dependÃªncias a partir do requirements.txt
Agora vamos supor que herdamos um projeto que jÃ¡ contenha o arquivo requirements.txt.

Como faÃ§o para instalar as dependÃªncias dele?

nginx
Copiar
Editar
pip install -r requirements.txt
âš ï¸ Tome sempre cuidado ao executar esse comando!

VocÃª deve estar com seu venv ativado, caso contrÃ¡rio, as dependÃªncias descritas em requirements.txt serÃ£o instaladas globalmente no seu sistema, o que pode acarretar conflitos ao utilizÃ¡-las localmente em projetos.

